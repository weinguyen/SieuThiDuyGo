<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vegist Admin Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-shield-alt" style="color: #22c55e; margin-right: 0.5rem;"></i>Đăng nhập Admin</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username"><i class="fas fa-user"></i> Tên đăng nhập</label>
                    <input type="text" id="username" required placeholder="Nhập tên đăng nhập">
                </div>
                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> Mật khẩu</label>
                    <input type="password" id="password" required placeholder="Nhập mật khẩu">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Đăng nhập
                </button>
            </form>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="dashboard" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-leaf"></i>
                    <span>Vegist Admin</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="#" class="nav-link active" data-page="overview">
                            <i class="fas fa-chart-line"></i> Tổng quan
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="products">
                            <i class="fas fa-box"></i> Sản phẩm
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="categories">
                            <i class="fas fa-tags"></i> Danh mục
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="customers">
                            <i class="fas fa-users"></i> Khách hàng
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="employees">
                            <i class="fas fa-user-tie"></i> Nhân viên
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="reviews">
                            <i class="fas fa-star"></i> Đánh giá
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="promotions">
                            <i class="fas fa-gift"></i> Khuyến mãi
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="accounts">
                            <i class="fas fa-user-cog"></i> Tài khoản
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="lich-su-kho-hang">
                            <i class="fas fa-warehouse"></i> Lịch sử kho hàng
                        </a></li>
                    <li><a href="#" class="nav-link" data-page="Don-hang">
                            <i class="fas fa-shopping-cart"></i> Đơn hàng
                        </a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button id="logoutBtn" class="btn btn-secondary" style="width: 100%;">
                    <i class="fas fa-sign-out-alt"></i> Đăng xuất
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="pageTitle">Tổng quan</h1>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i>
                        <span id="adminName">Admin</span>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content">
                <!-- Overview Page -->
                <div id="overviewPage" class="page active">
                    <div class="stats-grid">
                        <div class="stat-card hover-lift">
                            <div class="stat-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalProducts">0</h3>
                                <p>Tổng sản phẩm</p>
                            </div>
                        </div>
                        <div class="stat-card hover-lift">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalCustomers">0</h3>
                                <p>Khách hàng</p>
                            </div>
                        </div>
                        <div class="stat-card hover-lift">
                            <div class="stat-icon">
                                <i class="fas fa-tags"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalCategories">0</h3>
                                <p>Danh mục</p>
                            </div>
                        </div>
                        <div class="stat-card hover-lift">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalReviews">0</h3>
                                <p>Đánh giá</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Page -->
                <div id="productsPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý sản phẩm</h2>
                        <button class="btn btn-primary" id="addProductBtn">
                            <i class="fas fa-plus"></i> Thêm sản phẩm
                        </button>
                    </div>
                    <div class="search-bar">
                        <input type="text" id="productSearch" placeholder="Tìm kiếm sản phẩm...">
                        <button class="btn btn-secondary" id="searchProductBtn">
                            <i class="fas fa-search"></i> Tìm kiếm
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="productsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Danh mục</th>
                                    <th>Giá</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Categories Page -->
                <div id="categoriesPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý danh mục</h2>
                        <button class="btn btn-primary" id="addCategoryBtn">
                            <i class="fas fa-plus"></i> Thêm danh mục
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="categoriesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Tên danh mục</th>
                                    <th>Mô tả</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Customers Page -->
                <div id="customersPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý khách hàng</h2>
                    </div>
                    <div class="table-container">
                        <table id="customersTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Họ tên</th>
                                    <th>Số điện thoại</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Employees Page -->
                <div id="employeesPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý nhân viên</h2>
                        <button class="btn btn-primary" id="addEmployeeBtn">
                            <i class="fas fa-plus"></i> Thêm nhân viên
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="employeesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Họ tên</th>
                                    <th>Chức vụ</th>
                                    <th>Địa chỉ</th>
                                    <th>Số điện thoại</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Reviews Page -->
                <div id="reviewsPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý đánh giá</h2>
                    </div>
                    <div class="table-container">
                        <table id="reviewsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Sản phẩm</th>
                                    <th>Khách hàng</th>
                                    <th>Đánh giá</th>
                                    <th>Nội dung</th>
                                    <th>Ngày</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Promotions Page -->
                <div id="promotionsPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý khuyến mãi</h2>
                        <button id="addPromotionBtn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Thêm khuyến mãi
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="promotionsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Mô tả</th>
                                    <th>Ngày bắt đầu</th>
                                    <th>Ngày kết thúc</th>
                                    <th>Phần trăm giảm</th>
                                    <th>Sản phẩm áp dụng</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Accounts Page -->
                <div id="accountsPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý tài khoản</h2>
                    </div>
                    <div class="table-container">
                        <table id="accountsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Tên đăng nhập</th>
                                    <th>Email</th>
                                    <th>Vai trò</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Lịch sử kho hàng -->
                <div id="lich-su-kho-hangPage" class="page">
                    <div class="page-header">
                        <h2>Lịch sử kho hàng</h2>
                        <button class="btn btn-primary" id="addHistoryBtn">
                            <i class="fas fa-plus"></i> Thêm giao dịch kho hàng
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="lich-su-kho-hang-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Sản phẩm ID</th>
                                    <th>Loại giao dịch</th>
                                    <th>Số lượng thay đổi</th>
                                    <th>Tồn kho sau cùng</th>
                                    <th>Ngày thực hiện</th>
                                    <th>Nhân viên ID</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Don Hang Page -->
                <div id="Don-hangPage" class="page">
                    <div class="page-header">
                        <h2>Quản lý đơn hàng</h2>
                        <button class="btn btn-primary" id="addDonHangBtn">
                            <i class="fas fa-plus"></i> Thêm đơn hàng
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="donHangTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Khách hàng</th>
                                    <th>Ngày tạo</th>
                                    <th>Tổng tiền</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Thêm sản phẩm</h3>
                <span class="close">&times;</span>
            </div>
            <form id="productForm">
                <div class="form-group">
                    <label for="productName">Tên sản phẩm</label>
                    <input type="text" id="productName" required placeholder="Nhập tên sản phẩm">
                </div>
                <div class="form-group">
                    <label for="productCategory">Danh mục</label>
                    <select id="productCategory" required>
                        <option value="">Chọn danh mục</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productQuantity">Số lượng</label>
                    <input type="number" id="productQuantity" required placeholder="Nhập số lượng">
                </div>
                <div class="form-group">
                    <label for="productExpiry">Hạn sử dụng</label>
                    <input type="date" id="productExpiry" required>
                </div>
                <div class="form-group">
                    <label for="productManufacture">Ngày sản xuất</label>
                    <input type="date" id="productManufacture" required>
                </div>
                <div class="form-group">
                    <label for="productPrice">Giá</label>
                    <input type="number" id="productPrice" step="0.01" required placeholder="Nhập giá sản phẩm">
                </div>
                <div class="form-group">
                    <label for="productDescription">Mô tả</label>
                    <textarea id="productDescription" rows="4" placeholder="Nhập mô tả sản phẩm"></textarea>
                </div>
                <div class="form-group">
                    <label for="productImage">Hình ảnh</label>
                    <input type="file" id="productImage" multiple accept="image/*">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelProductBtn">Hủy</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Lưu
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">Thêm danh mục</h3>
                <span class="close">&times;</span>
            </div>
            <form id="categoryForm">
                <div class="form-group">
                    <label for="categoryName">Tên danh mục</label>
                    <input type="text" id="categoryName" required placeholder="Nhập tên danh mục">
                </div>
                <div class="form-group">
                    <label for="categoryDescription">Mô tả</label>
                    <textarea id="categoryDescription" rows="3" placeholder="Nhập mô tả danh mục"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelCategoryBtn">Hủy</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Lưu
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Employee Modal -->
    <div id="employeeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="employeeModalTitle">Thêm nhân viên</h3>
                <span class="close">&times;</span>
            </div>
            <form id="employeeForm">
                <div class="form-group">
                    <label for="employeeName">Họ tên</label>
                    <input type="text" id="employeeName" required placeholder="Nhập họ tên">
                </div>
                <div class="form-group">
                    <label for="employeePosition">Chức vụ</label>
                    <input type="text" id="employeePosition" required placeholder="Nhập chức vụ">
                </div>
                <div class="form-group">
                    <label for="employeeAddress">Địa chỉ</label>
                    <input type="text" id="employeeAddress" placeholder="Nhập địa chỉ">
                </div>
                <div class="form-group">
                    <label for="employeePhone">Số điện thoại</label>
                    <input type="tel" id="employeePhone" placeholder="Nhập số điện thoại">
                </div>
                <div class="form-group">
                    <label for="employeeUsername">Tên đăng nhập</label>
                    <input type="text" id="employeeUsername" required placeholder="Nhập tên đăng nhập">
                </div>
                <div class="form-group">
                    <label for="employeePassword">Mật khẩu</label>
                    <input type="password" id="employeePassword" required placeholder="Nhập mật khẩu">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEmployeeBtn">Hủy</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Lưu
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Promotion Modal -->
    <div id="promotionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="promotionModalTitle">Thêm khuyến mãi</h3>
                <span class="close">&times;</span>
            </div>
            <form id="promotionForm">
                <input type="hidden" id="promotionId">
                <div class="form-group">
                    <label for="promotionDesc">Mô tả</label>
                    <textarea id="promotionDesc" rows="2" placeholder="Nhập mô tả khuyến mãi"></textarea>
                </div>
                <div class="form-group">
                    <label for="promotionStart">Ngày bắt đầu</label>
                    <input type="date" id="promotionStart" required>
                </div>
                <div class="form-group">
                    <label for="promotionEnd">Ngày kết thúc</label>
                    <input type="date" id="promotionEnd" required>
                </div>
                <div class="form-group">
                    <label for="promotionPercent">Phần trăm giảm (%)</label>
                    <input type="number" id="promotionPercent" min="1" max="100" required placeholder="Nhập % giảm giá">
                </div>
                <div class="form-group">
                    <label for="promotionProducts">Sản phẩm áp dụng</label>
                    <select id="promotionProducts" multiple style="min-height: 120px;">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                    <small style="color: #64748b;">Giữ Ctrl để chọn nhiều sản phẩm</small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary"
                        onclick="document.getElementById('promotionModal').style.display='none'">Hủy</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Lưu
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thêm giao dịch kho hàng</h3>
                <span class="close" id="closeHistoryModal">&times;</span>
            </div>
            <form id="addHistoryKhoHangForm">
                <div class="form-group">
                    <label for="historySanPhamId">Sản phẩm ID</label>
                    <input type="number" id="historySanPhamId" required placeholder="Nhập ID sản phẩm">
                </div>
                <div class="form-group">
                    <label for="historyLoaiGiaoDich">Loại giao dịch</label>
                    <select id="historyLoaiGiaoDich" required>
                        <option value="">Chọn loại giao dịch</option>
                        <option value="nhap_kho">Nhập kho</option>
                        <option value="xuat_kho">Xuất kho</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="historySoLuongThayDoi">Số lượng thay đổi</label>
                    <input type="number" id="historySoLuongThayDoi" required placeholder="Nhập số lượng">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelHistoryBtn">Hủy</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Thêm
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Don Hang Modal -->
    <div id="donHangModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Thêm đơn hàng</h3>
                <span class="close" id="closeDonHangModal">&times;</span>
            </div>
            <form id="addDonHangForm">
                <div class="form-group">
                    <label for="donHangKhachHangId">ID Khách hàng</label>
                    <input type="number" id="donHangKhachHangId" required placeholder="Nhập ID khách hàng">
                </div>
                <div class="form-group">
                    <label for="donHangTen">Tên đơn hàng</label>
                    <input type="text" id="donHangTen" required placeholder="Nhập tên đơn hàng">
                </div>
                <div class="form-group">
                    <label for="donHangPhuongThuc">Phương thức thanh toán</label>
                    <select id="donHangPhuongThuc" required>
                        <option value="">Chọn phương thức</option>
                        <option value="Banking">Banking</option>
                        <option value="Cod">COD</option>
                    </select>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="donHangNgayChuanBi">Ngày chuẩn bị hàng</label>
                        <input type="date" id="donHangNgayChuanBi" required>
                    </div>
                    <div class="form-group">
                        <label for="donHangNgayNhan">Ngày nhận hàng</label>
                        <input type="date" id="donHangNgayNhan" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="donHangDonViVC">Đơn vị vận chuyển</label>
                    <input type="text" id="donHangDonViVC" required placeholder="Nhập đơn vị vận chuyển">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="donHangTenNguoiNhan">Tên người nhận</label>
                        <input type="text" id="donHangTenNguoiNhan" required placeholder="Nhập tên người nhận">
                    </div>
                    <div class="form-group">
                        <label for="donHangSdtNguoiNhan">SĐT người nhận</label>
                        <input type="text" id="donHangSdtNguoiNhan" required placeholder="Nhập số điện thoại">
                    </div>
                </div>
                <div class="form-group">
                    <label for="donHangDiaChi">Địa chỉ giao hàng</label>
                    <input type="text" id="donHangDiaChi" required placeholder="Nhập địa chỉ giao hàng">
                </div>
                <div class="form-group">
                    <label for="donHangGhiChu">Ghi chú</label>
                    <input type="text" id="donHangGhiChu" placeholder="Nhập ghi chú (tùy chọn)">
                </div>
                <div class="form-group">
                    <label>Chi tiết đơn hàng</label>
                    <div id="chiTietDonHangList" style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 1rem;">
                        <div class="chi-tiet-row">
                            <input type="number" class="chiTietSanPhamId" placeholder="ID Sản phẩm" required>
                            <input type="number" class="chiTietSoLuong" placeholder="Số lượng" required>
                        </div>
                    </div>
                    <button type="button" id="addChiTietBtn" class="btn btn-secondary" style="margin-top: 0.5rem;">
                        <i class="fas fa-plus"></i> Thêm sản phẩm
                    </button>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelDonHangBtn">Hủy</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Thêm đơn hàng
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chi Tiet Don Hang Modal -->
    <div id="chiTietDonHangModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Chi tiết đơn hàng</h3>
                <span class="close" id="closeChiTietDonHangModal">&times;</span>
            </div>
            <div id="chiTietDonHangContent" style="max-height: 70vh; overflow-y: auto;">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script type="module" src="api.js"></script>
    <script type="module" src="admin.js"></script>
    <script>
        // Sidebar toggle functionality
        document.addEventListener('DOMContentLoaded', function () {
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            const sidebar = document.querySelector('.sidebar');

            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', function () {
                    sidebar.classList.toggle('open');
                });
            }

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function (e) {
                if (window.innerWidth <= 1024) {
                    if (!sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
                        sidebar.classList.remove('open');
                    }
                }
            });

            // Update page title when navigating
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function () {
                    const pageTitle = this.textContent.trim();
                    document.getElementById('pageTitle').textContent = pageTitle;
                });
            });
        });
    </script>
</body>

</html>